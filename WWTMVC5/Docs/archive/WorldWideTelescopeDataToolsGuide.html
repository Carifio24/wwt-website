

<A NAME="WorldWideTelescopeDataToolsGuide"></A><H1>WorldWide Telescope Data Tools Guide</H1>
<p><font color="red">Note: This documentation is preliminary and subject to change.</font></p>
<img alt="" height="27" src="UIImages/YesYes.bmp" width="220">

<p>This document describes the use of a number of tools that can be used to help prepare data for the WorldWide Telescope.</p>
<p>To install the tools, follow the instructions for installing the 
	<a href="http://research.microsoft.com/en-us/collaboration/wwt-ap/resources.aspx">WorldWide 
	Telescope May 2009 ADK</a>. To run the tools select <strong>All 
Programs</strong> and navigate to the following location:</p>
	<table class="T1" cellspacing="8" cellpadding="8">
	<tr><td><img alt="" height="119" src="Images/AcademicKit.jpg" width="236"></td></tr>
</table>
<p>Ensure that you are using the latest versions of the tools: currently versions 0.23.</p>
<h2>Table of Contents</h2>
<ul>
<li><a href="#WWTStudyChopper">WWT Study Chopper</a></li>
<ul>
<li><a href="#TheStudyChopperDialog">The Study Chopper Dialog</a></li>
<li><a href="#CreatingImagePyramidsandThumbnails">Creating Image Pyramids and Thumbnails</a></li>
<li><a href="#CreatingLocalandFinalWtmlFiles">Creating Local and Final WTML Files</a></li>
<li><a href="#ImageAlignmentwithinWorldWideTelescope">Image Alignment within WorldWide Telescope</a></li>
<li><a href="#InitializingStudyChopper">Initializing Study Chopper</a></li>
<li><a href="#CommandLineInputtoStudyChopper">Command Line Input to Study Chopper</a></li>
</ul>

<li><a href="#WWTSphereToaster">WWT Sphere Toaster</a></li>
<ul>
<li><a href="#PreparingaSingleImage">Preparing a Single Image</a></li>
<li><a href="#SpecialCases">Special Cases</a></li>
<li><a href="#InitializingSphereToaster">Initializing Sphere Toaster</a></li>
<li><a href="#CommandLineInputtoSphereToaster">Command Line Input to Sphere Toaster</a></li>

</ul>

</ul>



<H4>See Also</H4>
<UL type="disc">
<LI><A HREF="http://www.worldwidetelescope.org/authoring/Authoring.aspx">WorldWide Telescope Authoring</A></LI>
<LI><A HREF="WorldWideTelescopeDataFilesReference.html">WorldWide Telescope Data Files Reference</A></LI>
<LI><A HREF="WorldWideTelescopeLocalizationTool.html">WorldWide Telescope Localization Tool</A></LI>
<LI><A HREF="WorldWideTelescopeProjectionReference.html">WorldWide Telescope Projection Reference</A></LI>
<LI><A HREF="WorldWideTelescopeWebControlScriptReference.html">WorldWide Telescope Web Control Script Reference</A></LI>
</UL>

<hr>
<h2><a name="WWTStudyChopper">WWT Study Chopper</a></h2>
<p>WWT StudyChopper takes as input a study image, and generates the tiled multi-resolution image pyramid, in the correct
folder structure and with the correct names, that WorldWide Telescope can accept as foreground image data. In addition to
the image pyramid for each study, an appropriate thumbnail image (96 pixels wide, by 45 in height) and two 
WTML<br>&nbsp;files are 
also output. One of these WTML<br>&nbsp;files references the location of the thumbnail and pyramid at a local address -- useful for
immediate testing purposes -- and the second references the intended public location when the work is ready for release. 
The content of these WTML<br>&nbsp;files can be used as standalone files, or can be cut 
and pasted into a larger document such as a community payload file, or perhaps a 
collection of similar studies.</p>
<p>The tile pyramid structure, and WTML<br>&nbsp;files, are explained in detail in the 
<A HREF="WorldWideTelescopeDataFilesReference.html">WorldWide Telescope Data Files Reference</A> document.</p>
<p>The following sections explain how to use the tool.</p>
<ul>
<li><a href="#TheStudyChopperDialog">The Study Chopper Dialog</a></li>
<li><a href="#CreatingImagePyramidsandThumbnails">Creating Image Pyramids and Thumbnails</a></li>
<li><a href="#CreatingLocalandFinalWtmlFiles">Creating Local and Final WTML Files</a></li>
<li><a href="#ImageAlignmentwithinWorldWideTelescope">Image Alignment within WorldWide Telescope</a></li>
<li><a href="#InitializingStudyChopper">Initializing Study Chopper</a></li>
<li><a href="#CommandLineInputtoStudyChopper">Command Line Input to Study Chopper</a></li>
</ul>
<H4>See Also</H4>
<UL type="disc">
<LI><A HREF="#WorldWideTelescopeDataToolsGuide">WorldWide Telescope Data Tools Guide</A></LI>
</UL>

<hr>
<h3><a name="TheStudyChopperDialog">The Study Chopper Dialog</a></h3>
<p>The StudyChopper tool is very useful for data preparation, but its user 
interface is somewhat functional and navigating it is not intuitive. For the 
most part using the tool is simply a case of entering information in the correct 
order, which is described in the following steps. Running the tool will reveal the single dialog:</p>
	<table class="T1" cellspacing="8" cellpadding="8">
	<tr><td>
		<img alt="" height="696" src="Images/StudyChoppedDialog.jpg" width="1022"></td></tr>
</table>
<H4>See Also</H4>
<UL type="disc">
<li><a href="#WWTStudyChopper">WWT Study Chopper</a></li>
<LI><A HREF="#WorldWideTelescopeDataToolsGuide">WorldWide Telescope Data Tools Guide</A></LI>
</UL>

<hr>
<h3><a name="CreatingImagePyramidsandThumbnails"></a>Creating Image Pyramids and Thumbnails</h3>
<p>Before using the tool, place all the images for the study in a single folder. Preferred image formats are the lossless
and transparency supporting formats such as .tiff and .png, rather than .jpg. Then go through the following steps:</p>
<ol>
<li>Enter the folder name in the <b>Input Folder</b> text box.</li>
<li>Enter the name of a particular file, or file type using wildcard characters 
as required, in the <strong>Input File(s)</strong> box.</li>
<li>Select the <b>Load</b> button. This will populate the <b>Loaded Studies</b> list box with the image filenames. The tool 
will automatically remove images from the <b>Loaded Studies</b> list that cannot be loaded. The tool also
cannot load very large images. In the latter case consider dividing the study into several smaller studies.</li>
<li>If necessary, use the <b>Clear All Entries</b> and <b>Remove Entry</b> buttons, and <b>Display Folder Names</b> 
and <b>Display File Size</b> checkboxes, to edit the list of images.</li>
<li>Enter the desired folder for the output to be written to, in the <b>Output Folder</b> text box.</li>
	<li>The
	<strong>Max Level</strong> entry is calculated by the tool from the size of 
	the source image. There is no reason to increase it, but it could be 
	decreased for a large image during testing, but for the most part need not 
	be changed.</li>
<li>Click the <b>Tile Images</b> button. This starts tiling as a <i>background</i> process. 
A progress bar will display underneath the <b>Tile Images</b> button. This 
process will 
also create the thumbnail images. If only thumbnail images are required, then click the <b>Save Thumbnail</b> button instead.
 Also, set the <b>Overwrite Existing Tiles</b> checkbox appropriately. </li>
<li>When the tiling process has completed (a line will appear in the <strong>
Messages</strong> text box to indicate this), and without closing the tool, check the contents of the output folder -- 
it should contain a complete image pyramid. In the example below a 780 x 480 image of Saturn was tiled. Note that there are three
tiling levels (0, 1 and 2), and note also that there are only two entries, and not the full complement of four, at level 2. 
This is because the height of the image is such that the top row (0) and bottom row (3) would have entirely empty tiles.</li>

	The number 639246517 is the ID number generated by the tool, and is a unique 
number used as the 
top level folder name. The <strong>&lt;ID&gt;</strong> text box of the tool is read-only.

	<table class="T1" cellspacing="8" cellpadding="8">
	<tr><td><img alt="Saturn" height="480" src="Images/Saturn.png" width="780"></td></tr>
	<tr><td>
		<img alt="Tiled Saturn" height="214" src="Images/SaturnChopped.jpg" width="719"></td></tr>
</table>

</ol>
<p>If the image pyramid has been created correctly, go on to the next step of creating the 
WTML<br>&nbsp;files. If not, go back to
the data and make the necessary adjustments.</p>
<H4>See Also</H4>
<UL type="disc">
<li><a href="#WWTStudyChopper">WWT Study Chopper</a></li>
<LI><A HREF="#WorldWideTelescopeDataToolsGuide">WorldWide Telescope Data Tools Guide</A></LI>
</UL>


<hr>
<h3><a name="CreatingLocalandFinalWtmlFiles"></a>Creating Local and Final WTML Files</h3>
<p>Creating WTML files for the newly tiled study will make testing it, and including it in larger collections, straightforward.
To create the two WTML files, go through the following steps:</p>
<ol>
<li>Click the name in the <strong>Loaded Studies </strong>list to select the 
required study. Note that a number of fields such as <strong>Name</strong>,
<strong>Tile Url</strong>, and <strong>Thumbnail Url</strong> are automatically 
populated, and these can be edited now by clicking on the list boxes or changing 
the text, or can be edited later (outside of the tool) by hand if needed. For 
example, the <strong>Name</strong> field can take a semi-colon separated list of 
names. The first name will be used along with the thumbnail to identify the 
study, and if a name is not entered, then the filename will be used as the name. 
Note the image thumbnail will appear to the right of the <b>Loaded Studies</b> text box.</li>
	<li>Optionally, enter appropriate text into the <strong>Credits</strong> 
	text box, and enter a valid link into the <strong>Credits Url</strong> text 
	box. The link is provided to help users locate more information on the 
	study.</li>
	<li>If known, enter an appropriate <strong>RA</strong> and <strong>Dec</strong> 
	for the image. An approximation might work well enough as the image can be 
	finely aligned and scaled within WorldWide Telescope (refer to the section <a href="#ImageAlignmentwithinWorldWideTelescope">Image Alignment within WorldWide Telescope</a>). 
	Similarly for the <strong>Height</strong> of the image the default 
	approximation of 6 arc minutes (or 0.1 degree) can work well enough until 
	the image is finely scaled.</li>
	<li>If known, enter the <strong>Classification</strong>, <strong>
	Constellation</strong> and <strong>Band</strong>. These are not critical for 
	the image to appear in WorldWide Telescope.</li>
	<li>Enter the name of the final WTML file in the <b>Output WTML file</b> text box.</li>
<li>Enter a title in the <b>Output WTML title</b> text box to be used as the 
highest level Folder Name entry in the WTML file.</li>
<li>If the final location for the study is known, enter it into the <b>Output Webpage</b> text box. 
The final &quot;/&quot; in the URL is optional.</li>
	<li>Click the <b>Save Wtml</b> button. This will create both local and final 
	WTML files. These will be placed in the 
output folder specified for the creation of the pyramid. For the example Saturn 
study, the local file would look similar to this:</li>
	<table class="T1" cellspacing="8" cellpadding="8">
		<tr>
			<td>&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt;<br>&lt;Folder Group=&quot;Explorer&quot; 
	Searchable=&quot;True&quot; Type=&quot;Sky&quot; Name=&quot;Saturn Study&quot;&gt;<br>&nbsp; &lt;Place 
	Name=&quot;Saturn&quot; DataSetType=&quot;Sky&quot; RA=&quot;0&quot; Dec=&quot;0&quot; Constellation=&quot;AND&quot; 
	Classification=&quot;Unfiltered&quot; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
	Magnitude=&quot;0&quot; ZoomLevel=&quot;1.2&quot; Rotation=&quot;0&quot; Angle=&quot;0&quot; Opacity=&quot;100&quot; 
	AngularSize=&quot;0&quot;&gt;<br>&nbsp;&nbsp;&nbsp; &lt;ForegroundImageSet&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
	&lt;ImageSet Name=&quot;Saturn&quot; Url=&quot;C:\Users\.....\Pictures\Output\639246517\{1}\{3}\{3}_{2}.png&quot;
			<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; AltUrl=&quot;&quot; DemUrl=&quot;&quot; 
	BaseTileLevel=&quot;0&quot; TileLevels=&quot;2&quot; BaseDegreesPerTile=&quot;0.213333333333333&quot;
			<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
	FileType=&quot;.png&quot; BottomsUp=&quot;False&quot; Projection=&quot;Tan&quot; QuadTreeMap=&quot;&quot; CenterX=&quot;0&quot; 
	CenterY=&quot;0&quot;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
	OffsetX=&quot;0&quot; OffsetY=&quot;0&quot; Rotation=&quot;0&quot; DataSetType=&quot;Sky&quot; BandPass=&quot;Visible&quot; 
	Sparse=&quot;True&quot;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
	WidthFactor=&quot;2&quot;&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
	&lt;Credits /&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;CreditsUrl 
	/&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;ThumbnailUrl&gt;C:\Users\.......\Pictures\Output\639246517.jpg&lt;/ThumbnailUrl&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
	&lt;Description /&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/ImageSet&gt;<br>&nbsp;&nbsp;&nbsp; 
	&lt;/ForegroundImageSet&gt; <br>&nbsp; &lt;/Place&gt;<br>&lt;/Folder&gt; 
			</td>
		</tr>
	</table>

</ol>
<p>To test the output, click on the LOCAL version of the WTML file, or alternatively load this file from within WorldWide
Telescope. This will display the study and the thumbnails in WorldWide Telescope. 
Check not only the images, but also the metadata such as the Name, Credits, CreditsUrl, and so on.</p>
<h4><a name="PlateFiles">Plate Files</a></h4>
<p>If the <strong>Make .plate File</strong> checkbox is checked, then in 
addition to building the tile pyramid, a single .plate file will be output to 
the specified location. A plate file contains every tile of the pyramid, and a 
header section encoding the format of the pyramid. The purpose of this single 
file is that it is then much easier to transmit the pyramid to colleagues, copy 
to a backup file, or send it for some other purpose.</p>
<h4><a name="AVMTags">AVM Tags</a></h4>
<p>If the input image has AVM-tags, then the appropriate fields will be filled automatically with their values. For more 
details on AVM tags, refer to <a href="http://virtualastronomy.org">Virtual Astronomy.org</a>. AVM tagging is a standard proposed 
by members of the professional astronomy outreach/educators community to tag astronomical photographs with useful metadata 
that contain details of what the photograph contains, how it was taken, copyrights, credits, and so on. </p>
<p>Images (currently, 
only TIFF images) can be tagged with AVM tags from FITS files using Adobe Photoshop and FITS liberator, or 
by using the online 
tagging tool available on the Virtual Astronomy site.</p>
<H4>See Also</H4>
<UL type="disc">
<li><a href="#WWTStudyChopper">WWT Study Chopper</a></li>
<LI><A HREF="#WorldWideTelescopeDataToolsGuide">WorldWide Telescope Data Tools Guide</A></LI>
</UL>

<hr>
<h3><a name="ImageAlignmentwithinWorldWideTelescope">Image Alignment within WorldWide Telescope</a></h3>
<p>It is possible to adjust the position of an image within WorldWide Telescope.&nbsp; 
The image to be aligned should be referenced from
a collection file. For ease of navigation collection files should be located in the <b>My Documents\WWT Collections</b> folder. Collections in this folder will 
appear under the <b>My Collections</b> folder when WorldWide Telescope is run. So in order to enable 
easy editing, move the WTML<br>&nbsp;file containing the images
you wish to align to the <b>My Documents\WWT Collections</b> folder.</p>
<p>Open up WorldWide Telescope, navigate to the correct collections file, open it, and select the image to be aligned by 
clicking on the thumbnail. Click on the image itself when it appears in the main view, then press Ctrl-E. This brings up the 
<b>Image Alignment</b> dialog:</p>
	<table class="T1" cellspacing="8" cellpadding="8">
<tr><td><img alt="" height="214" src="UIImages/ImageAlignment.jpg" width="290"></td><td>
	Use the controls in this dialog to finely align an image.<br><br>Note that 
	there is currently no save or cancel options. If the data is in the correct 
	folder, noted above, then the changes will be saved off to the <strong>Place</strong> 
	entry in the WTML<br>&nbsp;file.<br><br><strong>Pivot Mode</strong> can be one of the 
	easiest ways to align an image. Right-click on a point on the image that is 
	in the correct location (typically a star), a white circle will appear to 
	confirm this, then rotate, scale, and invert the image simply by moving the 
	mouse. Right-click again to de-select <strong>Pivot Mode</strong>. Typically 
	aim to align two significant stars that are as far apart as possible on the 
	image to get the best alignment between foreground and background.</td></tr>
</table>
<p>This feature is not currently fully implemented.</p>
<H4>See Also</H4>
<UL type="disc">
<li><a href="#WWTStudyChopper">WWT Study Chopper</a></li>
<LI><A HREF="#WorldWideTelescopeDataToolsGuide">WorldWide Telescope Data Tools Guide</A></LI>
</UL>


<hr>
<h3><a name="InitializingStudyChopper"></a>Initializing Study Chopper</h3>
<p>StudyChopper reads in default settings from the <i>configStudyChopper.txt</i> 
file when the tool is first run. Edit this file
appropriately to make use of the tool efficient. This can either be done by hand, or by use of the 
<b>Save Settings in config.txt</b> button. This configuration file should reside 
in the same folder as the tool. The default contents of this file are shown in the following table:</p>
	<table class="T1" cellspacing="8" cellpadding="8">
	<tr><td>INDIR=C:\Users\Public\Pictures<br>INFILE=*.tif<br>
		OUTDIR=C:\Users\Public\Pictures\tiles<br>OUTWTMLFILE=egstudies.wtml<br>
		OUTWTMLTITLE=Example Studies<br>
		OUTWEBDIR=http://research.microsoft.com/wwtimages<br>
		STOREONWWTSERVERS=False<br>MAKEPLATE=False<br>
		OVERWRITEEXISTINGTILES=True<br>CREATEJPEG=False<br>
		DISPLAYFOLDERNAMES=False<br>DISPLAYFILESIZE=True</td></tr>
</table>

<p>Note - security issues may prevent the button/edited file from working as 
expected.</p>
<H4>See Also</H4>
<UL type="disc">
<li><a href="#WWTStudyChopper">WWT Study Chopper</a></li>
<LI><A HREF="#WorldWideTelescopeDataToolsGuide">WorldWide Telescope Data Tools Guide</A></LI>
</UL>

<hr>
<h3><a name="CommandLineInputtoStudyChopper"></a>Command Line Input to Study Chopper</h3>
<p>The Study Chopper tool can be run from a Command Prompt window, taking a single parameter - the name of an XML file, where the content of that file
determines the required input and output.</p>
<p>To run the tool from the Command Prompt window:</p>
<ol>
<li>Navigate to the location of StudyChopper.exe. By default this is:<br>
<code><br>C:\Program Files (x86)\Microsoft\WWT ADK May 2009\<br></code></li>
<li>Create an XML file to define the inputs and outputs. The contents of the XML file should be as follows:</li>
<table class="T1" cellspacing="8" cellpadding="8">
<tr><td><h5>FileChopper.xml</h5></td></tr>
<tr><td><span style='font-size:10.0pt;font-family:"Courier New";'>
&lt;?<span style="color:#2B91AF;">xml</span>&nbsp;version=<span style="color:#A31515;">&quot;1.0&quot;</span>&nbsp;encoding=<span style="color:#A31515;">&quot;utf-8&quot;</span>?&gt; <br />
  <span style="color:green">
&nbsp;&nbsp;&lt;!--&nbsp;************************************************************&nbsp;--&gt; <br />
&nbsp;&nbsp;&lt;!--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Settings&nbsp;for&nbsp;the&nbsp;command&nbsp;line&nbsp;input&nbsp;for&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&gt; <br />
&nbsp;&nbsp;&lt;!--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;Study&nbsp;Chopper&nbsp;tool&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&gt; <br />
&nbsp;&nbsp;&lt;!--&nbsp;************************************************************&nbsp;--&gt; <br /></span>
&lt;<span style="color:#2B91AF;">SettingsFile</span>&nbsp;Type=<span style="color:#A31515;">&quot;Chopper&quot;</span>&gt; <br />
 <br />
  <span style="color:green">
&nbsp;&nbsp;&lt;!--&nbsp;************************************************************&nbsp;--&gt; <br />
&nbsp;&nbsp;&lt;!--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Required&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&gt; <br />
&nbsp;&nbsp;&lt;!--&nbsp;************************************************************&nbsp;--&gt; <br /></span>
 <br />
&nbsp;&nbsp;&lt;InputFolder&gt;C:\Users\....\Documents\OneImage&lt;/InputFolder&gt; <br />
&nbsp;&nbsp;&lt;InputFiles&gt;*.jpg&lt;/InputFiles&gt; <br />
&nbsp;&nbsp;&lt;OutputFolder&gt;C:\Users\....\Documents\Test&nbsp;web&lt;/OutputFolder&gt; <br />
 <br />
  <span style="color:green">
&nbsp;&nbsp;&lt;!--&nbsp;************************************************************&nbsp;--&gt; <br />
&nbsp;&nbsp;&lt;!--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Optional&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&gt; <br />
&nbsp;&nbsp;&lt;!--&nbsp;************************************************************&nbsp;--&gt; <br /></span>
&nbsp;&nbsp;&lt;OutputFile&gt;Chopper&nbsp;test.wtml&lt;/OutputFile&gt; <br />
&nbsp;&nbsp;&lt;OutputTitle&gt;Chopper&nbsp;title&lt;/OutputTitle&gt; <br />
&nbsp;&nbsp;&lt;OutputWebpage&gt;Output&nbsp;web&nbsp;URL&lt;/OutputWebpage&gt; <br />
&nbsp;&nbsp;&lt;Overwrite&gt;True&lt;/Overwrite&gt; <br />
&nbsp;&nbsp;&lt;MakePlate&gt;False&lt;/MakePlate&gt; <br />
&nbsp;&nbsp;&lt;SaveAsJpeg&gt;False&lt;/SaveAsJpeg&gt; <br />
 <br />
&lt;/<span style="color:#2B91AF;">SettingsFile</span>&gt; <br />
</span></td></tr></table>

<li>In the Command Prompt window type:<br>
<code><br>StudyChopper <em>path</em>\FileChopper.xml<br></code><br>
where <i>path</i> is the full path to the XML file.</li>
<li>If this method of running the tool is used, and there are no errors, the tool will be opened, run, then closed. If there are errors the tool will be
left open, in order to help identify the issue.</li>
</ol>
<H4>See Also</H4>
<UL type="disc">
<li><a href="#WWTStudyChopper">WWT Study Chopper</a></li>
<LI><A HREF="#WorldWideTelescopeDataToolsGuide">WorldWide Telescope Data Tools Guide</A></LI>
</UL>



<hr>
<h2><a name="WWTSphereToaster">WWT Sphere Toaster</a></h2>

<p>WWT Sphere Toaster takes as input an equirectangular image, and produces as 
output a tile pyramid of images suitable either for background images (such as a 
complete sky survey), or for spherical object surfaces (such as stars, planets 
and moons). Suitable WTML<br>&nbsp;files encapsulating the tile pyramid, and a thumbnail 
image, are also output. The tile pyramid is produced using the 
TOAST project system. For a description of this projection system, refer to the <A HREF="WorldWideTelescopeProjectionReference.html">
WorldWide Telescope Projection Reference</A> document.</p>
<p>The following examples use a test image for clarity. </p>
<ul>
<li><a href="#PreparingaSingleImage">Preparing a Single Image</a></li>
<li><a href="#SpecialCases">Special Cases</a></li>
<li><a href="#InitializingSphereToaster">Initializing Sphere Toaster</a></li>
<li><a href="#CommandLineInputtoSphereToaster">Command Line Input to Sphere Toaster</a></li>
</ul>
<H4>See Also</H4>
<UL type="disc">
<LI><A HREF="#WorldWideTelescopeDataToolsGuide">WorldWide Telescope Data Tools Guide</A></LI>
</UL>

<hr>
<h3><a name="PreparingaSingleImage">Preparing a Single Image</a></h3>
<p>To convert a single equirectangular image of an entire object (sky survey, 
planet or moon surface, for example), go through the following procedure. Note 
that the entire image is loaded into memory by this tool, so there are limits on 
the size of image that the tool can currently process. This limit is increased 
if the tool is run on a 64-bit operating system.</p>
<ol>
<li>When the tool is run the <strong>Input</strong> tab appears. Use the <strong>Open</strong> button to select the 
equirectangular image.

	The equator will appear as a red line across the center of the image.<br>

	<table class="T1" cellspacing="8" cellpadding="8">
	<tr><td><img alt="" height="544" src="Images/ToastInput1.bmp" width="678"></td><td>This image shows the default settings
	when a 1000 x 500 image is loaded.
	<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;


	</td></tr>
</table>
</li>

<li>Next, select the <strong>WTML</strong> tab.
	<table class="T1" cellspacing="8" cellpadding="8">
	<tr><td><img alt="" height="544" src="Images/ToastWtml.jpg" width="678">
		Enter appropriate text for <strong>Title</strong>, <strong>Credits</strong>, and 
		<strong>Credits</strong> <strong>URL</strong>. <strong>Credits</strong> 
		should be kept to a maximum of 240 characters.<br><br>The 
		<strong>Storage</strong> <strong>URL</strong> entry is the web accessible location where the final output 
		should be stored.<br><br>The <strong>Make</strong> <strong>Wtml</strong> button can be used if only 
		WTML<br>&nbsp;files are required. Otherwise they are generated from the <strong>Output</strong> tab.
		<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

		</td></tr>
</table>
</li>


<li>Now select the <strong>Output</strong> tab.
	<table class="T1" cellspacing="8" cellpadding="8">
	<tr><td><img alt="" height="544" src="Images/ToastOutput1.bmp" width="678">
		Ensure to select one of <strong>Panorama</strong>, <strong>Sky</strong> or 
		<strong>Planet</strong>. These will affect the 
		inside or outside orientations of the sphere.<br><br>The maximum levels 
		of a pyramid should not be increased, but can be decreased during 
		testing - to improve performance.<br><br>Refer to the note 
		on <a href="#PlateFiles">Plate Files</a>.<br><br>Selecting <strong>
		Generate Pyramid + WTML</strong> will create the image pyramid, WTML<br>&nbsp;files, and thumbnail.
				<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

		</td></tr>
</table>
</li>

<li>The <strong>Test</strong> tab can be selected after the input file is 
selected and with the <strong>Panorama</strong>, <strong>Sky</strong> or <strong>Planet</strong> 
orientation set in the <strong>Output</strong> tab. It is not necessary to 
generate any output to run the test.
	<table class="T1" cellspacing="8" cellpadding="8"><tr><td>
	<img alt="" height="544" src="Images/ToastTest.bmp" width="678">
	The default test is for level 0, and X and Y at 0.<br><br>This image  shows level has been set to 1 to examine one of the four tiles at this 
		level.
				<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

		</td></tr>
</table>
</li></ol>
<p>That completes the process in the simplest of cases - one image covering the 
complete sphere. Note that a very large number of tiles can be produced. For 
example, if the original image is 8192 x 4096 pixels, then 1365 tiles are 
generated in a full pyramid with five levels (and this can take 10 to 20 minutes 
of computing time). If the original image is 20000 x 10000 pixels, then over 
21500 tiles are created at the required 7 levels (and this can take 24 
hours of computing time). Blank tiles are not created. By default, all tiles are 
png images, though this can be changed to jpeg, though the jpeg format does not store transparency and can have undesirable 
artifacts.</p>


<H4>See Also</H4>
<UL type="disc">
<li><a href="#WWTSphereToaster">WWT Sphere Toaster</a></li>
<LI><A HREF="#WorldWideTelescopeDataToolsGuide">WorldWide Telescope Data Tools Guide</A></LI>
</UL>


<hr>
<h3><a name="SpecialCases">Special Cases</a></h3>
<p>The single example will cover the great majority of cases 
of the use of this tool. However there are
a few other options that might be of value.</p>
<ul>
<li>If the <strong>RA/Longitude increases Left to Right</strong> box is 
unchecked, then the RA/longitude is assumed to increase right to left, and the layout of the output is changed from the image on the left 
to the image on the right:
	<table class="T1" cellspacing="8" cellpadding="8">
	<tr><td><img alt="" height="265" src="Images/ToastLR.bmp" width="269"></td><td>
		<img alt="" height="265" src="Images/ToastRL.bmp" width="267"></td></tr>
</table></li>
<li>If the <strong>Galactic Coordinates</strong> checkbox is selected, then the coordinate system is changed from J2000 to galactic 
coordinates.
	<table class="T1" cellspacing="8" cellpadding="8">
	<tr><td><img alt="" height="263" src="Images/ToastGalactic.bmp" width="266"></td></tr></table></li>
	
<li>Change the value of <strong>RA/Longitude of left of EQ</strong> if the left hand side of 
the image is not at Longitude 0. For example, a map of the Earth will often have 
Longitude -180 for its left edge, so enter -180 in this field. A value of 45 was entered to give the 
image below.
	<table class="T1" cellspacing="8" cellpadding="8">
	<tr><td><img alt="" height="266" src="Images/Toast45.bmp" width="265"></td></tr>
</table></li>

<li>For Panoramas it can be helpful to use the <strong>Offset</strong> settings to center the image around the "equator". 

<table class="T1" cellspacing="8" cellpadding="8">
<tr><td><img alt="" height="544" src="Images/ToastPanorama.bmp" width="678"></td></tr>
<tr><td><img alt="" height="544" src="Images/ToastPanorama2.bmp" width="678"></td></tr>
</table></li>

<li>There are additional options on the <strong>Output</strong> tab if Panorama is selected, giving a range of 
choices on how to fill the empty void above the panorama image.
<table class="T1" cellspacing="8" cellpadding="8">
<tr><td>The panorama source image</td></tr>
<tr><td><img alt="" height="544" src="Images/PanoramaInput.bmp" width="678"></td></tr>
<tr><td>The output options</td></tr>
<tr><td><img alt="" height="151" src="Images/FillOption.bmp" width="170"></td></tr>
</table>
<table class="T1" cellspacing="8" cellpadding="8">
<tr><td><b>No Fill</b></td><td><img alt="" height="205" src="Images/PanoramaNoFill.bmp" width="212"></td></tr>
<tr><td><b>Extend top row</b></td><td><img alt="" height="198" src="Images/PanoramaExtendTopRow.bmp" width="214"></td></tr>
<tr><td><b>Average of top row</b></td><td>
	<img alt="" height="199" src="Images/PanoramaAverageOfTopRow.bmp" width="206"></td></tr>
<tr><td><b>Zone V Grey</b></td><td>
	<img alt="" height="192" src="Images/PanoramaZoneGrey.bmp" width="210"></td></tr>

</table>


</li>

</ul>


<H4>See Also</H4>
<UL type="disc">
<li><a href="#WWTSphereToaster">WWT Sphere Toaster</a></li>
<LI><A HREF="#WorldWideTelescopeDataToolsGuide">WorldWide Telescope Data Tools Guide</A></LI>

</UL>

<hr>
<h3><a name="InitializingSphereToaster"></a>Initializing Sphere Toaster</h3>

<p>Sphere Toaster requires the following dll files to work: WwtDataUtils.dll, OctMap.dll, BigPic.dll, PlateTools.dll. These
should be in their correct location on installation.</p>
<p>The configSphereToaster.txt file, in the same location as the program, can be edited to change the default output directory.</p>
	<table class="T1" cellspacing="8" cellpadding="8">
<tr><td><code>OUTDIR=C:\Users\Public\Public Documents\example\
</code></td></tr>
</table>

<H4>See Also</H4>
<UL type="disc">
<li><a href="#WWTSphereToaster">WWT Sphere Toaster</a></li>
<LI><A HREF="#WorldWideTelescopeDataToolsGuide">WorldWide Telescope Data Tools Guide</A></LI>
</UL>

<hr>
<h3><a name="CommandLineInputtoSphereToaster">Command Line Input to Sphere Toaster</a></h3>
<p>The Sphere Toaster tool can be run from a Command Prompt window, taking a single parameter - the name of an XML file, where the content of that file
determines the required input and output.</p>
<p>To run the tool from the Command Prompt window:</p>
<ol>
<li>Navigate to the location of SphereToaster.exe. By default this is:<br>
<code><br>C:\Program Files (x86)\Microsoft\WWT ADK May 2009\<br></code></li>
<li>Create an XML file to define the inputs and outputs. The contents of the XML file should be as follows:</li>
<table class="T1" cellspacing="8" cellpadding="8">
<tr><td><h5>FileToaster.xml</h5></td></tr>
<tr><td><span style='font-size:10.0pt;font-family:"Courier New";'>
&lt;?<span style="color:#2B91AF;">xml</span>&nbsp;version=<span style="color:#A31515;">&quot;1.0&quot;</span>&nbsp;encoding=<span style="color:#A31515;">&quot;utf-8&quot;</span>?&gt; <br />
 <br />
   <span style="color:green">
&nbsp;&nbsp;&lt;!--&nbsp;************************************************************&nbsp;--&gt; <br />
&nbsp;&nbsp;&lt;!--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Settings&nbsp;for&nbsp;the&nbsp;command&nbsp;line&nbsp;input&nbsp;for&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&gt; <br />
&nbsp;&nbsp;&lt;!--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;Sphere&nbsp;Toaster&nbsp;tool&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&gt; <br />
&nbsp;&nbsp;&lt;!--&nbsp;************************************************************&nbsp;--&gt; <br /></span>

&lt;<span style="color:#2B91AF;">SettingsFile</span>&nbsp;Type=<span style="color:#A31515;">&quot;Toaster&quot;</span>&gt; <br />
 <br />
 <span style="color:green">
&nbsp;&nbsp;&lt;!--&nbsp;************************************************************&nbsp;--&gt; <br />
&nbsp;&nbsp;&lt;!--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Required&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&gt; <br />
&nbsp;&nbsp;&lt;!--&nbsp;************************************************************&nbsp;--&gt; <br /></span>
 <br />
&nbsp;&nbsp;&lt;InputFile&gt;C:\Users\....\Pictures\Rowers.bmp&lt;/InputFile&gt; <br />
&nbsp;&nbsp;&lt;Type&gt;Planet&lt;/Type&gt; <br />
&nbsp;&nbsp;&lt;OutputFolder&gt;C:\Users\....\Pictures\Toaster&lt;/OutputFolder&gt; <br />
 <br />
  <span style="color:green">
&nbsp;&nbsp;&lt;!--&nbsp;************************************************************&nbsp;--&gt; <br />
&nbsp;&nbsp;&lt;!--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Optional&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&gt; <br />
&nbsp;&nbsp;&lt;!--&nbsp;************************************************************&nbsp;--&gt; <br /></span>
 <br />
&nbsp;&nbsp;&lt;RALefttoRight&gt;True&lt;/RALefttoRight&gt; <br />
&nbsp;&nbsp;&lt;RALeftofEQ&gt;0&lt;/RALeftofEQ&gt; <br />
&nbsp;&nbsp;&lt;Galactic&gt;False&lt;/Galactic&gt; <br />
&nbsp;&nbsp;&lt;OffsetX0&gt;0&lt;/OffsetX0&gt; <br />
&nbsp;&nbsp;&lt;OffsetY0&gt;0&lt;/OffsetY0&gt; <br />
&nbsp;&nbsp; <br />
&nbsp;&nbsp;&lt;Overwrite&gt;True&lt;/Overwrite&gt; <br />
&nbsp;&nbsp;&lt;MakePlate&gt;False&lt;/MakePlate&gt; <br />
&nbsp;&nbsp;&lt;SaveAsJpeg&gt;False&lt;/SaveAsJpeg&gt; <br />
&nbsp;&nbsp; <br />
&nbsp;&nbsp;&lt;Title&gt;Test&nbsp;Toaster&nbsp;Settings&lt;/Title&gt; <br />
&nbsp;&nbsp;&lt;Credits&gt;MSR&lt;/Credits&gt; <br />
&nbsp;&nbsp;&lt;CreditsURL&gt;www.research.microsoft.com&lt;/CreditsURL&gt; <br />
&nbsp;&nbsp;&lt;StorageURL&gt;&lt;/StorageURL&gt; <br />
&nbsp;&nbsp; <br />
&lt;/<span style="color:#2B91AF;">SettingsFile</span>&gt; <br />
</span></td></tr></table>
<li>In the Command Prompt window type:<br>
<code><br>SphereToaster <em>path</em>\FileToaster.xml<br></code><br>
where <i>path</i> is the full path to the XML file.</li>
<li>If this method of running the tool is used, and there are no errors, the tool will be opened, run, then closed. If there are errors the tool will be
left open, in order to help identify the issue.</li>
</ol>

<H4>See Also</H4>
<UL type="disc">
<li><a href="#WWTSphereToaster">WWT Sphere Toaster</a></li>
<LI><A HREF="#WorldWideTelescopeDataToolsGuide">WorldWide Telescope Data Tools Guide</A></LI>
</UL>



